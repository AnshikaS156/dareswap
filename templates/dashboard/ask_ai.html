{% extends 'base.html' %}

{% block title %}AI Dare Generator - DareSwap{% endblock %}

{% block style %}
<style>
    .ai-generator-container {
        padding: 3rem 0;
        min-height: calc(100vh - 200px);
    }

    .ai-header {
        text-align: center;
        margin-bottom: 3rem;
        color: white;
    }

    .ai-header h1 {
        font-size: 3rem;
        font-weight: bold;
        text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        margin-bottom: 1rem;
    }

    .ai-header .ai-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
        animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
        0%, 100% { 
            transform: scale(1);
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }
        50% { 
            transform: scale(1.1);
            filter: drop-shadow(0 0 20px rgba(255,255,255,0.8));
        }
    }

    .ai-header p {
        font-size: 1.2rem;
        opacity: 0.95;
    }

    .generator-card {
        background: rgba(255, 255, 255, 0.98);
        border-radius: 25px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.25);
        padding: 2.5rem;
        margin-bottom: 2rem;
        border: none;
        position: relative;
        overflow: hidden;
    }

    .generator-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 6px;
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
        background-size: 300% 100%;
        animation: gradientSlide 3s ease infinite;
    }

    @keyframes gradientSlide {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .prompt-section {
        margin-bottom: 2rem;
    }

    .prompt-label {
        font-size: 1.1rem;
        font-weight: 600;
        color: #333;
        margin-bottom: 1rem;
        display: block;
    }

    .prompt-input {
        width: 100%;
        padding: 1rem 1.5rem;
        border: 2px solid #e0e0e0;
        border-radius: 15px;
        font-size: 1rem;
        transition: all 0.3s ease;
        resize: vertical;
        min-height: 120px;
        font-family: 'Arial', sans-serif;
    }

    .prompt-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
    }

    .generate-btn {
        background: linear-gradient(45deg, #667eea, #764ba2);
        border: none;
        border-radius: 25px;
        padding: 1rem 3rem;
        font-weight: bold;
        font-size: 1.1rem;
        color: white;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.7rem;
        margin: 0 auto;
        cursor: pointer;
        text-decoration: none;
    }

    .generate-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        color: white;
    }

    .generate-btn i {
        font-size: 1.2rem;
    }

    .results-section {
        margin-top: 3rem;
    }

    .dare-result {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
        border: 2px solid #667eea;
        border-radius: 20px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        position: relative;
        transition: all 0.3s ease;
    }

    .dare-result:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
    }

    .dare-result-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .dare-number {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.1rem;
    }

    .dare-title {
        font-size: 1.3rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 0.7rem;
    }

    .dare-description {
        color: #555;
        line-height: 1.6;
        margin-bottom: 1rem;
    }

    .dare-meta {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        align-items: center;
    }

    .use-dare-btn {
        background: linear-gradient(45deg, #4ecdc4, #44a08d);
        border: none;
        border-radius: 20px;
        padding: 0.6rem 1.5rem;
        color: white;
        font-weight: 600;
        transition: all 0.3s ease;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
    }

    .use-dare-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        color: white;
    }

    .regenerate-btn {
        background: linear-gradient(45deg, #ff6b6b, #fd79a8);
        border: none;
        border-radius: 25px;
        padding: 0.8rem 2rem;
        color: white;
        font-weight: 600;
        transition: all 0.3s ease;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 2rem auto 0;
        text-decoration: none;
    }

    .regenerate-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        color: white;
    }

    .ai-info-box {
        background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(68, 160, 141, 0.1));
        border-left: 4px solid #4ecdc4;
        padding: 1.5rem;
        border-radius: 15px;
        margin-top: 2rem;
    }

    .ai-info-box h4 {
        color: #44a08d;
        font-weight: bold;
        margin-bottom: 0.7rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .ai-info-box p {
        color: #555;
        margin: 0;
        line-height: 1.6;
    }

    .example-prompts {
        background: rgba(255, 255, 255, 0.98);
        border-radius: 25px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.25);
        padding: 2rem;
        margin-bottom: 2rem;
    }

    .example-prompts h3 {
        color: #333;
        font-weight: bold;
        margin-bottom: 1.5rem;
        text-align: center;
    }

    .example-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
    }

    .example-card {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
        padding: 1.2rem;
        border-radius: 15px;
        border: 2px solid transparent;
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        display: block;
    }

    .example-card:hover {
        border-color: #667eea;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        text-decoration: none;
    }

    .example-card i {
        font-size: 2rem;
        color: #667eea;
        margin-bottom: 0.7rem;
        display: block;
    }

    .example-card h5 {
        color: #333;
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 1rem;
    }

    .example-card p {
        color: #666;
        font-size: 0.9rem;
        margin: 0;
    }

    .error-message {
        background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1));
        border-left: 4px solid #e74c3c;
        padding: 1.5rem;
        border-radius: 15px;
        margin: 2rem 0;
        color: #c0392b;
    }

    .error-message i {
        margin-right: 0.5rem;
    }

    @media (max-width: 768px) {
        .ai-header h1 {
            font-size: 2rem;
        }

        .generator-card {
            padding: 1.5rem;
        }

        .generate-btn {
            width: 100%;
        }

        .dare-result-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.7rem;
        }

        .regenerate-btn {
            width: 100%;
            justify-content: center;
        }
    }
</style>
{% endblock %}

{% block body %}
<div class="ai-generator-container">
    <div class="container">
        <div class="ai-header">
            <div class="ai-icon">
                <i class="fas fa-robot"></i>
            </div>
            <h1>AI Dare Generator</h1>
            <p>Let AI create unique and exciting dares just for you!</p>
        </div>

        <!-- Example Prompts Section -->
        <div class="example-prompts">
            <h3><i class="fas fa-lightbulb" style="color: #f39c12;"></i> Need Inspiration?</h3>
            <div class="example-grid">
                <a href="{% url 'ask_ai' %}?prompt=Give me fun outdoor adventure dares for a group of friends" class="example-card">
                    <i class="fas fa-hiking"></i>
                    <h5>Outdoor Adventures</h5>
                    <p>Fun activities for nature lovers</p>
                </a>
                <a href="{% url 'ask_ai' %}?prompt=Suggest creative indoor dares for a rainy day" class="example-card">
                    <i class="fas fa-home"></i>
                    <h5>Indoor Fun</h5>
                    <p>Perfect for staying inside</p>
                </a>
                <a href="{% url 'ask_ai' %}?prompt=Create funny social media challenge dares" class="example-card">
                    <i class="fas fa-camera"></i>
                    <h5>Social Media</h5>
                    <p>Viral-worthy challenges</p>
                </a>
                <a href="{% url 'ask_ai' %}?prompt=Give me fitness and sports related dares" class="example-card">
                    <i class="fas fa-dumbbell"></i>
                    <h5>Fitness Challenges</h5>
                    <p>Get active and healthy</p>
                </a>
            </div>
        </div>

        <!-- Generator Card -->
        <div class="generator-card">
            <form method="POST" action="{% url 'ask_ai' %}">
                {% csrf_token %}
                <div class="prompt-section">
                    <label class="prompt-label">
                        <i class="fas fa-magic" style="color: #667eea; margin-right: 0.5rem;"></i>
                        What kind of dares are you looking for?
                    </label>
                    <textarea 
                        name="prompt" 
                        class="prompt-input" 
                        placeholder="Example: Give me 5 fun dares for a birthday party with friends. Make them creative and memorable!"
                        required>{{ user_prompt|default:"" }}</textarea>
                </div>

                <button type="submit" class="generate-btn">
                    <i class="fas fa-sparkles"></i>
                    <span>Generate Dares</span>
                </button>
            </form>

            {% if error %}
            <!-- Error Message -->
            <div class="error-message">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>Error:</strong> {{ error }}
            </div>
            {% endif %}

            {% if response %}
            <!-- Results Section -->
            <div class="results-section">
                {% for dare in response %}
                <div class="dare-result">
                    <div class="dare-result-header">
                        <div class="dare-number">{{ forloop.counter }}</div>
                    </div>
                    <div class="dare-title">{{ dare.title }}</div>
                    <div class="dare-description">{{ dare.description }}</div>
                    <div class="dare-meta">
                        <span class="dare-difficulty difficulty-{{ dare.difficulty|lower }}">{{ dare.difficulty }}</span>
                        <a href="{% url 'create_dare' %}?title={{ dare.title|urlencode }}&description={{ dare.description|urlencode }}&difficulty={{ dare.difficulty|urlencode }}"
                        class="use-dare-btn">
                        + Use This Dare
                    </a>
                    </div>
                </div>
                {% endfor %}

                <form method="POST" action="{% url 'ask_ai' %}">
                    {% csrf_token %}
                    <input type="hidden" name="prompt" value="{{ user_prompt }}">
                    <button type="submit" class="regenerate-btn">
                        <i class="fas fa-redo"></i>
                        <span>Generate More Dares</span>
                    </button>
                </form>
            </div>
            {% endif %}

            <!-- AI Info Box -->
            <div class="ai-info-box">
                <h4>
                    <i class="fas fa-info-circle"></i>
                    How it works
                </h4>
                <p>
                    Our AI uses the Groq API to generate personalized dares based on your prompt. 
                    Be specific about the type, difficulty, and context of dares you want. 
                    The AI will create unique, fun, and safe dares tailored to your needs!
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}